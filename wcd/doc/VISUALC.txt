This file explains how to compile wcd for Windows
with the Microsoft Visual C++ compiler.

For Unix/Linux/Cygwin compile instructions see file UNIX.txt
For DJGPP/MinGW/EMX compile instructions see file GCC_DOS.txt
For Watcom C compile instructions see file WATCOMC.txt

For how to install the program on DOS, Windows, OS/2 see file INST_DOS.txt.


Prerequisites
=============

* Visual C++ compiler.
* pdcurses  : CRT screen handling and optimization package
* perl      : Practical Extraction and Report Language (perlpod)

Needed for building packages:

* zip         : compressor-archiver  http://www.info-zip.org/


Visual C++
==========

You can get a free express version via this web page:
http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express


PDCurses
========

To build wcd with PDCurses interface you need to have the PDCurses
library installed. Get PDCurses at http://sourceforge.net/projects/pdcurses/
Compile it and copy the library file into the proper VC\lib directory
and the curses.h file in the VC\include directory.


Perl
====

Perl is required for the generation of the manual in text and html format. The
wcd source package in DOS text format includes all documentation files. When
you have the Unix package, which does not include the manuals, or just want to
recreate the manuals, then you need a 'perl' installation.

There exist ready-to-run perl packages.

    Windows:
        Strawberry Perl: http://strawberryperl.com/
        Active Perl    : http://www.activestate.com/activeperl


Problems on Windows VISTA/7
===========================

To be able to run `nmake install' you may need adminstrator rights. You can get
a Command Prompt with administrator rights if you right click on the Command
Prompt icon and select `run as administrator'.


Basic Installation
==================

win32    : Windows 32 bit console version.
win32zsh : Windows 32 bit for WinZsh or MSYS.
win32psh : Windows 32 bit PowerShell version.

Change to the appropriate directory `win32', `win32zsh', `win32psh',
Then change to the `vc' subdirectory.


Build wcd:

  Type `nmake' to compile the package.

Install wcd:

  Type `nmake install' to install the package.

  `nmake install' will also compile the package if it wasn't done yet.

To start clean:

  Type `nmake clean'

Mostly clean:

  The target `mostlyclean' will preserve the documentation files.

  Type `nmake mostlyclean'


Curses interface
================

The default interface is pdcurses.

win32* uses PDCurses with wide character support (CURSES=pdcursesw)

To disable CURSES and compile with stdio interface, reset the CURSES variable:

  nmake CURSES=


Graphical tree
==============

By default the graphical tree is drawn with line drawing
characters. If these are not available on your system you
can set ASCII_TREE=1 so that ASCII characters are used instead.

  nmake ASCII_TREE=1


Unicode support
===============

To activate Unicode support add UCS=1 to the nmake command:

  nmake UCS=1

This requires a (pd/n)curses installation with wide character support.

Unicode is only supported in Windows PowerShell, and Command Prompt
on Windows 7 or higher.


Installation Names
==================

By default `nmake install' will install the program in /usr/bin, the
language files in /usr/share/locale and the man file in
/usr/share/man. You can specify an installation prefix other than
`/usr' by giving `nmake' the option `prefix=PATH'.


Example:

  nmake clean
  nmake
  nmake install prefix=c:\Users\waterlan

The default prefixes are the same for as for GCC.

win32    : The default PREFIX is c:\usr\local
win32zsh : The default PREFIX is c:\usr\local
win32psh : The default PREFIX is c:\usr\local


manual pages in html and text format
====================================

To create the manuals in txt and html format type:

  nmake doc

To install the manuals in txt and html format type:

  nmake install-doc



distribution package
====================

After installation a ready-to-run binary distribution package can be created.

  Type `nmake dist' to create the package.

